<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mstRegHis">
	<insert id="mstRegHis.insertMstRegHis" parameterType="hashMap">
	<![CDATA[
		INSERT /* mstRegHis.insertMstRegHis */ INTO MST_REG_HIS(
			   MBR_NO		, HIS_DT		, REG_RLS_DT		, REG_RLS_CD		, DTL_CTNT
			 , CRE_ID		, CRE_DT		, UPD_ID			, UPD_DT
		)VALUES(
			   #{mbrNo}		, DATE_FORMAT(NOW(), '%Y%m%d%H%i%S')	, DATE_FORMAT(NOW(), '%Y%m%d')		, #{regRlsCd}		, #{dtlCtnt}
			 , #{creId}		, NOW()			, #{creId}			, NOW()
		)
	]]>
	</insert>

	<select id="mstRegHis.getMstRegHisList" parameterType="String" resultType="hashMap">
	<![CDATA[
		SELECT /* mstRegHis.getMstRegHisList */
			   MRH.MBR_NO		, MRH.HIS_DT		, MRH.REG_RLS_DT		, MRH.DTL_CTNT			, MRH.CRE_ID
			 , MRH.CRE_DT		, MRH.UPD_ID		, MRH.UPD_DT
			 , MRH.REG_RLS_CD	, SC.CD_NM AS REG_RLS_NM
		  FROM MST_REG_HIS MRH
		  LEFT JOIN SYS_CD SC ON (MRH.REG_RLS_CD = SC.CD_ID AND SC.USE_YN = 'Y')
		 WHERE MRH.MBR_NO = #{mbrNo}
		 ORDER BY MRH.CRE_DT DESC
	]]>
	</select>

	<delete id="mstRegHis.deleteMstRegHis" parameterType="String">
	<![CDATA[
		DELETE /* mstRegHis.deleteMstRegHis */ FROM MST_REG_HIS
		 WHERE MBR_NO = #{mbrNo}
	]]>
	</delete>
</mapper>